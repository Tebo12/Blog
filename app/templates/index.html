{% extends 'base.html' %}
{% block content %}
  <div style="display: flex; justify-content: space-between; align-items: center;">
      <h2>All posts</h2>
      <form method="get" action="/" style="margin: 0;">
          <input type="text" name="q" placeholder="Search posts..." value="{{ search_query or '' }}">
          <button type="submit">Search</button>
          {% if search_query %}
            <a href="/" style="margin-left: 0.5rem; font-size: 0.9rem;">Clear</a>
          {% endif %}
      </form>
  </div>

  {% if posts %}
    <ul>
      {% for p in posts %}
        <li>
          <a href="/html/posts/{{ p.id }}">{{ p.title }}</a>
          <span class="muted">by {{ user_id_to_login.get(p.author_id, 'unknown') }} Â· {{ p.created_at.strftime('%Y-%m-%d %H:%M') }}</span>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="muted">No posts found.</p>
  {% endif %}
{% endblock %}
